streams:
  - name: falcon
    documents:
      - s3://ai2-llm/pretraining-data/sources/falcon-refinedweb/v2-frac_005_100-qc_cc_multi_bin-paloma-rep-pii/documents/*
    attributes:
      - mmlu_eleuther
    output:
      max_size_in_bytes: 40_000_000_000
      path: ${oc.env:HOME}/mmlu-contaminated/documents/falcon
    filter:
      include:
        - >-
          (.attributes.mmlu_eleuther | length != 0) and
          ((.attributes.mmlu_eleuther | map(.[2] > 0.8) | any) >= 0.8)
      syntax: jq

  - name: c4
    documents:
      - s3://ai2-llm/pretraining-data/sources/c4/v1_7-dd_ngram_dp_030-qc_cc_en_bin_001-fix/documents/*
    attributes:
      - mmlu_eleuther
    output:
      max_size_in_bytes: 40_000_000_000
      path: ${oc.env:HOME}/mmlu-contaminated/documents/c4
    filter:
      include:
        - >-
          (.attributes.mmlu_eleuther | length != 0) and
          ((.attributes.mmlu_eleuther | map(.[2] > 0.8) | any) >= 0.8)
      syntax: jq

work_dir:
  input: "/tmp/falcon_cc_multi_bin_mix_v2/input"
  output: "/tmp/falcon_cc_multi_bin_mix_v2/output"

processes: 188
