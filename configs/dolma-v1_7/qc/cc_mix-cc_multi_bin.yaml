streams:
  - name: cc_en_head
    documents:
      - s3://ai2-llm/pretraining-data/sources/olmo-mix/v1_7_dd_ngram_docpara_le030_decontam/documents/cc_en_head/*
    attributes:
      - cc_multi_bin
    output:
      max_size_in_bytes: 3894967296
      path: s3://ai2-llm/pretraining-data/sources/olmo-mix/v1_7-dd_ngram_dp_030-qc_cc_en_bin_001/documents/cc_en_head
      # discard_fields:
      #   - attributes
      #   - metadata
    filter:
      include:
        - (.attributes.cc_multi_bin__cc_multi_bin__hq[0][-1]) > 0.01
      syntax: jq


  - name: cc_en_middle
    documents:
        - s3://ai2-llm/pretraining-data/sources/olmo-mix/v1_7_dd_ngram_docpara_le030_decontam/documents/cc_en_middle/*
    attributes:
      - cc_multi_bin
    output:
      max_size_in_bytes: 3894967296
      path: s3://ai2-llm/pretraining-data/sources/olmo-mix/v1_7-dd_ngram_dp_030-qc_cc_en_bin_001/documents/cc_en_middle
      # discard_fields:
      #   - attributes
      #   - metadata
    filter:
      include:
        - (.attributes.cc_multi_bin__cc_multi_bin__hq[0][-1]) > 0.01
      syntax: jq


  - name: cc_en_tail
    documents:
        - s3://ai2-llm/pretraining-data/sources/olmo-mix/v1_7_dd_ngram_docpara_le030_decontam/documents/cc_en_tail/*
    attributes:
      - cc_multi_bin
    output:
      max_size_in_bytes: 3894967296
      path: s3://ai2-llm/pretraining-data/sources/olmo-mix/v1_7-dd_ngram_dp_030-qc_cc_en_bin_001/documents/cc_en_tail
      # discard_fields:
      #   - attributes
      #   - metadata
    filter:
      include:
        - (.attributes.cc_multi_bin__cc_multi_bin__hq[0][-1]) > 0.01
      syntax: jq


processes: 190
